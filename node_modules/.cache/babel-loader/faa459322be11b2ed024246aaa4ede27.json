{"ast":null,"code":"import _toConsumableArray from\"C:/Users/sudha/Desktop/NCSU/Junior Year NCSU/CSC 342/342-frontend-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:/Users/sudha/Desktop/NCSU/Junior Year NCSU/CSC 342/342-frontend-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/sudha/Desktop/NCSU/Junior Year NCSU/CSC 342/342-frontend-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/sudha/Desktop/NCSU/Junior Year NCSU/CSC 342/342-frontend-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'../styles/Movies.css';import{Container,Row,Col,Spinner}from'react-bootstrap';import MovieDatabase from'./MovieContainer';import Search from'./Search';import Sort from'./Sort';import Filter from'./Filter';import{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Movies=function Movies(_ref){var user=_ref.user;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),movies=_useState4[0],_setMovies=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),watchlist=_useState6[0],setWatchlist=_useState6[1];// Calls fetchMovieData once when the component renders\nuseEffect(function(){// Fetches the movies for the database and the user's watchlist\nvar fetchMovieData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _movies,watchlistResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);_context.next=4;return axios.get('/movies');case 4:_movies=_context.sent;_setMovies(_movies.data);_context.next=8;return axios.get(\"/users/\".concat(user.sub.substring(6),\"/watchlist\"));case 8:watchlistResponse=_context.sent;setWatchlist(watchlistResponse.data);setLoading(false);console.log(user);_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,14]]);}));return function fetchMovieData(){return _ref2.apply(this,arguments);};}();fetchMovieData();// eslint-disable-next-line\n},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-5 pt-5\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\",size:\"lg\",role:\"status\",style:{color:'#CC0000',width:'5rem',height:'5rem'}})});}return/*#__PURE__*/_jsx(Container,{fluid:true,className:\"movie-page\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(\"h2\",{id:\"moviesPageTitle\",children:\"Popular Movies\"}),/*#__PURE__*/_jsxs(Col,{xs:2,children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Search,{movies:movies,setMovies:_setMovies}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Sort,{movies:movies,setMovies:function setMovies(sortedMovies){return _setMovies(_toConsumableArray(sortedMovies));}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Filter,{movies:movies,watchlist:watchlist,setMovies:_setMovies,setWatchlist:setWatchlist})]}),/*#__PURE__*/_jsx(Col,{xs:10,children:/*#__PURE__*/_jsx(\"div\",{id:\"container-border\",children:/*#__PURE__*/_jsx(MovieDatabase,{movies:movies,watchlist:watchlist,setWatchlist:setWatchlist,user:user})})})]})});};export default Movies;","map":{"version":3,"sources":["C:/Users/sudha/Desktop/NCSU/Junior Year NCSU/CSC 342/342-frontend-2/src/components/Movies.js"],"names":["Container","Row","Col","Spinner","MovieDatabase","Search","Sort","Filter","useState","useEffect","axios","Movies","user","loading","setLoading","movies","setMovies","watchlist","setWatchlist","fetchMovieData","get","data","sub","substring","watchlistResponse","console","log","color","width","height","sortedMovies"],"mappings":"6uBAAA,MAAO,sBAAP,CACA,OAASA,SAAT,CAAoBC,GAApB,CAAyBC,GAAzB,CAA8BC,OAA9B,KAA6C,iBAA7C,CACA,MAAOC,CAAAA,aAAP,KAA0B,kBAA1B,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,MAAY,IAAVC,CAAAA,IAAU,MAAVA,IAAU,CACvB,cAA8BJ,QAAQ,CAAC,KAAD,CAAtC,wCAAOK,OAAP,eAAgBC,UAAhB,eACA,eAA4BN,QAAQ,CAAC,EAAD,CAApC,yCAAOO,MAAP,eAAeC,UAAf,eACA,eAAkCR,QAAQ,CAAC,EAAD,CAA1C,yCAAOS,SAAP,eAAkBC,YAAlB,eAEA;AACAT,SAAS,CAAC,UAAM,CACZ;AACA,GAAMU,CAAAA,cAAc,2FAAG,iLAEfL,UAAU,CAAC,IAAD,CAAV,CAFe,sBAGMJ,CAAAA,KAAK,CAACU,GAAN,CAAU,SAAV,CAHN,QAGTL,OAHS,eAIfC,UAAS,CAACD,OAAM,CAACM,IAAR,CAAT,CAJe,sBAKiBX,CAAAA,KAAK,CAACU,GAAN,kBAAoBR,IAAI,CAACU,GAAL,CAASC,SAAT,CAAmB,CAAnB,CAApB,eALjB,QAKTC,iBALS,eAMfN,YAAY,CAACM,iBAAiB,CAACH,IAAnB,CAAZ,CACAP,UAAU,CAAC,KAAD,CAAV,CACAW,OAAO,CAACC,GAAR,CAAYd,IAAZ,EARe,iFAUnBa,OAAO,CAACC,GAAR,cAVmB,qEAAH,kBAAdP,CAAAA,cAAc,2CAApB,CAaJA,cAAc,GAAI;AACrB,CAhBY,CAgBV,EAhBU,CAAT,CAkBJ,GAAIN,OAAJ,CAAa,CACT,mBACI,YAAK,SAAS,CAAC,uBAAf,uBACI,KAAC,OAAD,EAAS,SAAS,CAAC,QAAnB,CAA4B,IAAI,CAAC,IAAjC,CAAsC,IAAI,CAAC,QAA3C,CAAoD,KAAK,CAAE,CAAEc,KAAK,CAAE,SAAT,CAAoBC,KAAK,CAAE,MAA3B,CAAmCC,MAAM,CAAE,MAA3C,CAA3D,EADJ,EADJ,CAKC,CAED,mBACI,KAAC,SAAD,EAAW,KAAK,KAAhB,CAAiB,SAAS,CAAC,YAA3B,uBACI,MAAC,GAAD,yBACI,WAAI,EAAE,CAAC,iBAAP,4BADJ,cAEI,MAAC,GAAD,EAAK,EAAE,CAAE,CAAT,wBACI,aADJ,cAEI,KAAC,MAAD,EAAQ,MAAM,CAAEd,MAAhB,CAAwB,SAAS,CAAEC,UAAnC,EAFJ,cAGI,aAHJ,cAII,KAAC,IAAD,EAAM,MAAM,CAAED,MAAd,CAAsB,SAAS,CAAE,mBAAAe,YAAY,QAAId,CAAAA,UAAS,oBAAKc,YAAL,EAAb,EAA7C,EAJJ,cAKI,aALJ,cAMI,KAAC,MAAD,EAAQ,MAAM,CAAEf,MAAhB,CAAwB,SAAS,CAAEE,SAAnC,CAA8C,SAAS,CAAED,UAAzD,CAAoE,YAAY,CAAEE,YAAlF,EANJ,GAFJ,cAUI,KAAC,GAAD,EAAK,EAAE,CAAE,EAAT,uBACI,YAAK,EAAE,CAAC,kBAAR,uBACI,KAAC,aAAD,EAAe,MAAM,CAAEH,MAAvB,CAA+B,SAAS,CAAEE,SAA1C,CAAqD,YAAY,CAAEC,YAAnE,CAAiF,IAAI,CAAEN,IAAvF,EADJ,EADJ,EAVJ,GADJ,EADJ,CAoBH,CApDD,CAsDA,cAAeD,CAAAA,MAAf","sourcesContent":["import '../styles/Movies.css';\r\nimport { Container, Row, Col, Spinner } from 'react-bootstrap';\r\nimport MovieDatabase from './MovieContainer';\r\nimport Search from './Search';\r\nimport Sort from './Sort';\r\nimport Filter from './Filter';\r\nimport { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Movies = ({user}) => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [movies, setMovies] = useState([]);\r\n    const [watchlist, setWatchlist] = useState([]);\r\n\r\n    // Calls fetchMovieData once when the component renders\r\n    useEffect(() => {\r\n        // Fetches the movies for the database and the user's watchlist\r\n        const fetchMovieData = async () => {\r\n            try {\r\n                setLoading(true);\r\n                const movies = await axios.get('/movies');\r\n                setMovies(movies.data);\r\n                const watchlistResponse = await axios.get(`/users/${user.sub.substring(6)}/watchlist`);\r\n                setWatchlist(watchlistResponse.data);\r\n                setLoading(false);\r\n                console.log(user);\r\n        } catch (err) {\r\n            console.log(err);\r\n        }\r\n    };\r\n    fetchMovieData(); // eslint-disable-next-line\r\n}, []);\r\n\r\nif (loading) {\r\n    return (\r\n        <div className=\"text-center mt-5 pt-5\" >\r\n            <Spinner animation=\"border\" size=\"lg\" role=\"status\" style={{ color: '#CC0000', width: '5rem', height: '5rem' }}/>\r\n        </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Container fluid className=\"movie-page\">\r\n            <Row>\r\n                <h2 id='moviesPageTitle'>Popular Movies</h2>\r\n                <Col xs={2}>\r\n                    <br></br>\r\n                    <Search movies={movies} setMovies={setMovies}/>\r\n                    <br></br>\r\n                    <Sort movies={movies} setMovies={sortedMovies => setMovies([...sortedMovies])} />\r\n                    <br></br>\r\n                    <Filter movies={movies} watchlist={watchlist} setMovies={setMovies} setWatchlist={setWatchlist} />\r\n                </Col>\r\n                <Col xs={10}>\r\n                    <div id=\"container-border\">\r\n                        <MovieDatabase movies={movies} watchlist={watchlist} setWatchlist={setWatchlist} user={user} />\r\n                    </div>\r\n                </Col>\r\n            </Row>\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default Movies;"]},"metadata":{},"sourceType":"module"}